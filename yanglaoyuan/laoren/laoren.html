<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Use correct character set. -->
    <meta charset="utf-8"/>
    <!-- Tell IE to use the latest, best version. -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <!-- Make the application on mobile take up the full browser screen and disable user scaling. -->
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <title>老人信息</title>
    <script src="../../js/jquery-3.5.1.min.js"></script>
</head>
<body>

<div id = 'olderInfo' class="info">
    <table id ="older-searchInfo">

    </table>
</div>
<script>

    //获取登录老人id，这个需要实现登录功能将id传过来
        var id = 3;
        var indexedDB = window.indexedDB;
        var db;
        if (!indexedDB) {
            window.alert("你的浏览器不支持IndexedDB");
        }

//打开数据库
        var request = window.indexedDB.open("yanglao", 1);
        request.onerror = function (event) {
            console.log('数据库打开报错');
        };
        request.onupgradeneeded = function (e) {
            db = event.target.result;
            console.log("版本变化");

        }
        request.onsuccess = function (event) {
            db = event.target.result;
            var res = db.transaction(['yanglaoyuanlaoren'],'readonly').objectStore('yanglaoyuanlaoren').get(id);
            res.onsuccess = function (e) {//成功执行回调
                var older = e.target.result;
                var name = older.name;
                var gender = older.gender;
                var birthday = older.birthday;
                var bedid = older.bedid;
                var html = "";
                html += '<tr>';
                html += '<th> Name</th>' + '<td>' + name + '</td>';
                html += '<th> gender</th>' + '<td>' + gender + '</td>';
                html += '<th> birthday</th>' + '<td>' + birthday + '</td>';
                html += '<th> bedid</th>' + '<td>' + bedid + '</td>';
                html += '<tr>';
                html += '</tr>';
                $("#older-searchInfo").append(html);
            }
        }


</script>


</body>
</html>
